/**
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * @title Table Parser Plugin
 * @overview Digest complex tabular data and validate complex table
 * @license wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * @author @duboisp
 *
 */
!function(a,b,c,d){"use strict";var e="wb-tableparser",f="."+e,g=e+"-inited",h="wb-init"+f,i=d.doc,j=function(b){function c(b){s.colcaption.elem=b,s.rowcaption.elem=b;var c,d,e={colcaption:s.colcaption,rowcaption:s.rowcaption,elem:b},f=[];0!==a(b).children().length?(a(b).contents().filter(function(){if(c||3!==this.nodeType){if(!c&&1===this.nodeType)return void(c=this)}else{if(c=a(this).text().replace(/^\s+|\s+$/g,""),0!==c.length)return c=this,void(d=!0);c=!1}}),a(b).children().filter(function(){d?f.push(this):d=!0})):c=b,f.length>1?e.description=a(f):1===f.length&&(e.description=f[0]),c&&(e.caption=c),e.groupZero=s,e.type=1,s.groupheadercell=e,a(b).data().tblparser=e}function e(c,d){var e,f,g,h,i={elem:{},start:0,end:0,col:[],groupZero:s},j=0;if(i.elem=c,c&&(a(c).data().tblparser=i),i.uid=v,v+=1,s.allParserObj.push(i),i.start=0!==t.length?t[t.length-1].end+1:1,c&&a("col",c).each(function(){var b=a(this),c=void 0!==b.attr("span")?parseInt(b.attr("span"),10):1,d={elem:{},start:0,end:0,groupZero:s};d.uid=v,v+=1,s.allParserObj.push(d),d.start=i.start+j,d.end=i.start+j+c-1,d.elem=this,d.groupZero=s,b.data().tblparser=d,i.col.push(d),u.push(d),j+=c}),0===i.col.length){if(c)e=void 0!==a(c).attr("span")?parseInt(a(c).attr("span"),10):1;else{if("number"!=typeof d)return void b.trigger({type:"error.wb-tableparser.wb",pointer:b,err:31});e=d}for(j+=e,f=i.start,g=i.start+j;f!==g;f+=1)h={start:0,end:0,groupZero:s,elem:void 0},h.uid=v,v+=1,s.allParserObj.push(h),h.start=f,h.end=f,i.col.push(h),u.push(h)}i.end=i.start+j-1,t.push(i)}function h(c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,w,x,y,A,B,C,E,F,G=[];if(!s.colgrouphead&&!H){for(H=!0,c&&c>0?t.length>0&&(1!==t[0].start||t[0].end!==c&&t[0].end!==c+1)&&(b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:3}),t=[]):c=0,d=0,e=D.length;d!==e;d+=1)for(F=D[d],F.type||(F.type=1),f=0,g=F.cell.length;g>f&&(C=D[d].cell[f],C.scope="col",!(0===d&&0===f&&0===C.elem.innerHTML.length&&(C.type=6,s.layoutCell||(s.layoutCell=[]),s.layoutCell.push(C),f=C.width-1,f>=g)))&&(A=D[d+1],B=A?A.cell[f]:"",C.descCell||"th"!==C.elem.nodeName.toLowerCase()||C.type||!A||A.uid===C.uid||!B||B.type||"td"!==B.elem.nodeName.toLowerCase()||B.width!==C.width||1!==B.height||(A.type=5,B.type=5,B.row=F,C.descCell=B,s.desccell||(s.desccell=[]),s.desccell.push(B),f=C.width-1,!(f>=g)));f+=1)C.type||(C.type=1);for(d=0,e=D.length;d!==e;d+=1)if(F=D[d],5===F.type){for(f=0,g=F.cell.length;f!==g;f+=1)C=F.cell[f],5!==C.type&&6!==C.type&&1===C.height&&b.trigger({type:"warning.wb-tableparser.wb",pointer:C.elem,err:4}),C.uid===D[d-1].cell[f].uid&&(C.height-=1);s.nbDescriptionRow+=1}else G.push(F);if(s.colgrp=[],c>0&&(1===t.length||0===t.length)){for(l={},m=[],n={start:c+1,end:z,col:[],groupZero:s,elem:void 0,type:2},n.uid=v,v+=1,s.allParserObj.push(n),n.start>n.end&&b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:5}),l=n,d=n.start,e=n.end;e>=d;d+=1)o={start:0,end:0,groupZero:s,elem:void 0},o.uid=v,v+=1,s.allParserObj.push(o),s.col||(s.col=[]),m.push(o),o.start=d,o.end=d,o.groupstruct=n,n.col.push(o),u.push(o);if(s.colgrp[1]=[],s.colgrp[1].push(s.colcaption),c>0){for(p={start:1,elem:void 0,end:c,col:[],groupZero:s,type:1},p.uid=v,v+=1,s.allParserObj.push(p),t.push(p),t.push(l),s.colcaption.dataset=l.col,d=p.start,e=p.end;e>=d;d+=1)o={start:0,end:0,groupZero:s,elem:void 0},o.uid=v,v+=1,s.allParserObj.push(o),s.col||(s.col=[]),s.col.push(o),o.start=d,o.end=d,o.groupstruct=p,p.col.push(o),u.push(o);for(d=0,e=m.length;d!==e;d+=1)s.col.push(m[d])}for(0===t.length&&(t.push(l),s.colcaption.dataset=l.col),d=0,e=s.col.length;d!==e;d+=1)for(E=s.col[d],E.header=[],f=0,g=G.length;f!==g;f+=1)for(h=E.start,i=E.end;i>=h;h+=1)C=G[f].cell[h-1],(0===f||f>0&&C.uid!==G[f-1].cell[h-1].uid)&&1===C.type&&E.header.push(C)}else q=[],r=0===c?1:t[0].end+1,n={start:r,end:void 0,col:[],row:[],type:2},w=[],x=0,y=!1,a.each(t,function(){var l,m,n,o,p=this;if(x+=1,y||s.colgrp[0])return void b.trigger({type:"error.wb-tableparser.wb",pointer:p,err:6});if(a.each(p.col,function(){var a=this;s.col||(s.col=[]),s.col.push(a),a.type=1,a.groupstruct=p}),p.start<r)for(c!==p.end&&b.trigger({type:"warning.wb-tableparser.wb",pointer:p,err:7}),d=0,e=p.col.length;d!==e;d+=1)for(E=p.col[d],E.header=[],f=0,g=G.length;f!==g;f+=1)for(h=E.start,i=E.end;i>=h;h+=1)(0===f||f>0&&G[f].cell[h-1].uid!==G[f-1].cell[h-1].uid)&&1===G[f].cell[h-1].type&&E.header.push(G[f].cell[h-1]);else{for(l=void 0,d=0,e=G.length;d!==e;d+=1){if(k=G[d].cell[p.end-1],!k&&p.end>G[d].cell.length){b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:3});break}k.colpos+k.width-1===p.end&&k.colpos>=p.start&&(!l||l>d+1)&&(l=d+1)}for(l||(l=1),d=l-1,e=G.length;d!==e;d+=1)for(j=G[d],f=p.start-1,g=p.end;f!==g;f+=1)if(k=j.cell[f],k.colpos<p.start||k.colpos+k.width-1>p.end)return void b.trigger({type:"error.wb-tableparser.wb",pointer:b,err:9});for(d=w.length,e=l-1;d!==e;d+=1){if(k=G[d].cell[p.start-1],k.uid!==G[d].cell[p.end-1].uid||k.colpos>p.start||k.colpos+k.width-1<p.end)return void b.trigger({type:"error.wb-tableparser.wb",pointer:b,err:10});m=k,m.level=d+1,m.start=m.colpos,m.end=m.colpos+m.width-1,m.type=7,w.push(m),s.virtualColgroup||(s.virtualColgroup=[]),s.virtualColgroup.push(m),s.colgrp[d+1]||(s.colgrp[d+1]=[]),s.colgrp[d+1].push(m)}for(p.header=[],d=l-(l>=2?2:1),e=G.length;d!==e;d+=1)for(f=p.start;f<=p.end;f+=1)G[d].cell[f-1].rowpos===d+1&&(p.header.push(G[d].cell[f-1]),G[d].cell[f-1].colgroup=p),f+=G[d].cell[f-1].width-1;for(n=[],d=0;d<w.length-1;d+=1)n.push(w[d]);for(p.parentHeader=n,w.length<l&&(p.type||(p.type=2,p.level=l),w.push(p),s.colgrp[l]||(s.colgrp[l]=[]),s.colgrp[l].push(p)),o=!1,d=w.length-1;-1!==d;d-=1)w[d].end<=p.end&&(w[d].level<l&&D.length>0&&(p.type=3),3!==p.type||o||(w[w.length-1].summary=p,o=!0),w.pop());if(K||(p.type=2),1===l&&s.colgrp[1]&&s.colgrp[1].length>1&&D.length>0){for(d=0;d<s.colgrp[1].length;d+=1)if(3===s.colgrp[1][d].type){p.level=0,s.colgrp[0]||(s.colgrp[0]=[]),s.colgrp[0].push(p),s.colgrp[1].pop(),y=!0;break}K&&(p.type=3)}1===p.level&&2===p.type&&(p.repheader="caption"),s.col||(s.col=[]),a.each(p.col,function(){var a,b,c,e,g=this,h=g.start,i=g.end;for(g.type=p.type,g.level=p.level,g.groupstruct=p,g.header=[],f=l-1;f<G.length;f+=1)for(d=p.start-1;d<p.end;d+=1)c=G[f].cell[d],a=c.colpos,b=c.width-1,(a>=h&&i>=a||h>=a&&a+b>=i||h>=a+b&&a+b>=i)&&(e=g.header.length,(0===e||e>0&&g.header[e-1].uid!==c.uid)&&(g.header.push(c),G[f].cell[d].level=p.level))})}}),s.virtualColgroup||(s.virtualColgroup=[]),a.each(s.virtualColgroup,function(){var a=this;for(d=a.start-1;d<a.end;d+=1)s.col[d].headerLevel||(s.col[d].headerLevel=[]),s.col[d].headerLevel.push(a)});t.length>0&&c>0&&(s.colgrouphead=t[0],s.colgrouphead.type=1)}}function i(){o.type&&o.level||k(),G.push(o),o={}}function j(){o&&o.type&&i(),o={},o.elem=p,o.row=[],o.headerlevel=[],o.groupZero=s,o.uid=v,v+=1}function k(a){var c,d,e,f;if(J)return o.type=3,o.level=0,void(F=[]);if(0!==F.length)for(o&&o.type&&o.row.length>0&&(p={},j()),o.type=2,o.row=F,c=0,d=F.length;c!==d;c+=1)F[c].cell[0].type=7,F[c].cell[0].scope="row",F[c].cell[0].row=F[c],o.headerlevel.push(F[c].cell[0]);if(0===F.length&&0===G.length&&(o.type&&1===o.type&&(p={},j()),o.type=2,o.level=1),o.type=0===F.length&&G.length>0&&!o.type&&t[0]&&(1===t[0].type||!t[0].type&&t.length>0)&&!a?3:2,3!==o.type||K||(o.type=2,o.level=G[G.length-1].level),!o.level)if(G.length>0)if(e=G[G.length-1],2===o.type)if(o.headerlevel.length===e.headerlevel.length)o.level=e.level;else if(o.headerlevel.length<e.headerlevel.length){for(f=o.headerlevel,o.headerlevel=[],c=0;c<e.headerlevel.length-o.headerlevel.length;c+=1)o.headerlevel.push(e.headerlevel[c]);for(c=0;c<f.length;c+=1)o.headerlevel.push(f[c]);o.level=e.level}else o.headerlevel.length>e.headerlevel.length&&(o.level=o.headerlevel.length+1);else if(3===o.type)for(o.level=3===e.type?e.level-1:e.level,o.level<0&&b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:12}),c=0;c<e.headerlevel.length;c+=1)e.headerlevel[c].level<o.level&&o.headerlevel.push(e.headerlevel[c]);else o.level="Error, not calculated",b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:13});else o.level=1+F.length;for(c=0;c<o.headerlevel.length;c+=1)o.headerlevel[c].level=c+1,o.headerlevel[c].rowlevel=o.headerlevel[c].level;F=[],(void 0===o.level||o.level<0)&&b.trigger({type:"warning.wb-tableparser.wb",pointer:o.elem,err:14})}function l(c){x+=1;var d,f,g,l,m,u,G,H,I,J,K,L,M=1,N="",O=!1,P=a(c).children(),Q={colgroup:[],cell:[],elem:c,rowpos:x};if(a(c).data().tblparser=Q,Q.uid=v,v+=1,Q.groupZero=s,s.allParserObj.push(Q),d={cell:[],cgsummary:void 0,type:!1},d.uid=v,v+=1,s.allParserObj.push(d),f=function(a){d.type||(d.type=1),1!==d.type&&(Q.colgroup.push(d),d={cell:[],type:1},d.uid=v,v+=1,s.allParserObj.push(d)),d.cell.push(a),O=a.colpos+a.width-1},g=function(a){d.type||(d.type=2),2!==d.type&&(Q.colgroup.push(d),d={cell:[],type:2},d.uid=v,v+=1,s.allParserObj.push(d)),d.cell.push(a)},l=function(){for(var a,b;z>=M&&y[M]&&(b=y[M],b.spanHeight&&b.spanHeight>0&&b.colpos===M)&&b.height+b.rowpos-b.spanHeight===x;){for(N=b.elem.nodeName.toLowerCase(),"th"===N?f(b):"td"===N&&g(b),1===b.spanHeight?delete b.spanHeight:b.spanHeight-=1,a=0;a<b.width;a+=1)Q.cell.push(b);M+=b.width}},a.each(P,function(){var c,e,h,i=a(this),j=void 0!==i.attr("colspan")?parseInt(i.attr("colspan"),10):1,k=void 0!==i.attr("rowspan")?parseInt(i.attr("rowspan"),10):1;switch(this.nodeName.toLowerCase()){case"th":for(l(),c={rowpos:x,colpos:M,width:j,height:k,data:[],summary:[],elem:this},i.data().tblparser=c,c.groupZero=s,c.uid=v,v+=1,s.allParserObj.push(c),f(c),c.parent=d,c.spanHeight=k-1,h=0;j>h;h+=1)Q.cell.push(c),y[M+h]=c;M+=c.width;break;case"td":for(l(),e={rowpos:x,colpos:M,width:j,height:k,elem:this},i.data().tblparser=e,e.groupZero=s,e.uid=v,v+=1,s.allParserObj.push(e),g(e),e.parent=d,e.spanHeight=k-1,h=0;j>h;h+=1)Q.cell.push(e),y[M+h]=e;M+=e.width;break;default:b.trigger({type:"warning.wb-tableparser.wb",pointer:this,err:15})}N=this.nodeName.toLowerCase()}),l(),0===z&&(z=Q.cell.length),z!==Q.cell.length&&(Q.spannedRow=y,b.trigger({type:"warning.wb-tableparser.wb",pointer:Q.elem,err:16})),E)return void D.push(Q);if(Q.colgroup.push(d),"th"===N){if(Q.type=1,2===Q.colgroup.length&&1===x)if(2===Q.colgroup[0].type&&1===Q.colgroup[0].cell.length){if(0===a(Q.colgroup[0].cell[0].elem).html().length)return void D.push(Q);b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:17})}else b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:18});if(1===Q.colgroup.length)if(Q.colgroup[0].cell.length>1){if(!A)return void D.push(Q);b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:18})}else{if(1!==x||Q.cell[0].uid===Q.cell[Q.cell.length-1].uid)return F.push(Q),void(A=!0);b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:18})}Q.colgroup.length>1&&1!==x&&b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:21})}else{if(Q.type=2,A=!0,F.length>0&&Q.cell[0].uid===Q.cell[Q.cell.length-1].uid)return Q.type=5,Q.cell[0].type=5,Q.cell[0].row=Q,Q.cell[0].describe||(Q.cell[0].describe=[]),F[F.length-1].cell[0].descCell=Q.cell[0],Q.cell[0].describe.push(F[F.length-1].cell[0]),s.desccell||(s.desccell=[]),void s.desccell.push(Q.cell[0]);if((F.length>0||!o.type)&&k(),Q.type=o.type,Q.level=o.level,t[0]&&O&&t[0].end!==O&&t[0].end===O+1&&(O+=1),Q.lastHeadingColPos=O,o.lastHeadingColPos||(o.lastHeadingColPos=O),r||(r=O),Q.rowgroup=o,o.lastHeadingColPos!==O&&(!q&&o.lastHeadingColPos<O||q&&q===O?(a.each(y,function(){this&&this.spanHeight>0&&b.trigger({type:"warning.wb-tableparser.wb",pointer:this,err:29})}),y=[],F=[],C=[],n+=1,i(),p=void 0,j(),k(),Q.type=o.type):q&&r===O?(a.each(y,function(){this&&this.spanHeight>0&&b.trigger({type:"warning.wb-tableparser.wb",pointer:this,err:29})}),y=[],F=[],C=[],n+=1,i(),p=void 0,j(),k(!0),Q.type=o.type,b.trigger({type:"warning.wb-tableparser.wb",pointer:Q.elem,err:34})):b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:32})),o.lastHeadingColPos||(o.lastHeadingColPos=O),3!==o.type||q||(q=O),O){for(m=[],u=void 0,G=[],H=0;O>H;H+=1)if("td"===Q.cell[H].elem.nodeName.toLowerCase()&&(Q.cell[H].type||!Q.cell[H-1]||Q.cell[H-1].descCell||1!==Q.cell[H-1].type||Q.cell[H-1].height!==Q.cell[H].height||(Q.cell[H].type=5,Q.cell[H-1].descCell=Q.cell[H],Q.cell[H].describe||(Q.cell[H].describe=[]),Q.cell[H].describe.push(Q.cell[H-1]),Q.desccell||(Q.desccell=[]),Q.desccell.push(Q.cell[H]),s.desccell||(s.desccell=[]),s.desccell.push(Q.cell[H]),Q.cell[H].scope="row"),Q.cell[H].type||G.push(Q.cell[H])),"th"===Q.cell[H].elem.nodeName.toLowerCase())for(Q.cell[H].type=1,Q.cell[H].scope="row",u&&u.uid!==Q.cell[H].uid&&(u.height>=Q.cell[H].height?(u.height===Q.cell[H].height&&b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:23}),u.subheader||(u.subheader=[],u.isgroup=!0),u.subheader.push(Q.cell[H]),u=Q.cell[H],m.push(Q.cell[H])):b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:24})),u||(u=Q.cell[H],m.push(Q.cell[H])),I=0;I<G.length;I+=1)G[I].type||Q.cell[H].keycell||G[I].height!==Q.cell[H].height||(G[I].type=4,Q.cell[H].keycell=G[I],Q.keycell||(Q.keycell=[]),Q.keycell.push(G[I]),s.keycell||(s.keycell=[]),s.keycell.push(G[I]),G[I].describe||(G[I].describe=[]),G[I].describe.push(Q.cell[H]));a.each(G,function(){this.type||(b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:25}),Q.errorcell||(Q.errorcell=[]),Q.errorcell.push(this))}),Q.header=m}else O=0,0===t.length&&e(void 0,z);for(h(O),Q.headerset=o.headerlevel||[],0!==O&&(O=t[0].end),Q.datacell||(Q.datacell=[]),H=O;H<Q.cell.length;H+=1){for(J=!0,K=!0,I=0===O?0:1;I<t.length;I+=1)t[I].start<=Q.cell[H].colpos&&Q.cell[H].colpos<=t[I].end&&(Q.cell[H].type=3===Q.type||3===t[I].type?3:2,3===Q.type&&3===t[I].type&&0===a(Q.cell[H].elem).text().length&&(Q.cell[H].type=6,s.layoutCell||(s.layoutCell=[]),s.layoutCell.push(Q.cell[H])),Q.cell[H].collevel=t[I].level,Q.datacell.push(Q.cell[H])),K=!K;if(0===t.length&&(Q.cell[H].type=2,Q.datacell.push(Q.cell[H])),Q.cell[H].rowpos<x&&(Q.cell[H].addrowheaders||(Q.cell[H].addrowheaders=[]),Q.header))for(I=0;I<Q.header.length;I+=1)(Q.header[I].rowpos===x&&0===Q.cell[H].addrowheaders.length||Q.header[I].rowpos===x&&Q.cell[H].addrowheaders[Q.cell[H].addrowheaders.length-1].uid!==Q.header[I].uid)&&Q.cell[H].addrowheaders.push(Q.header[I])}for(L=0===t.length,0===t.length&&(L=!1),s.col||(s.col=[]),H=0;H<s.col.length;H+=1)for(I=s.col[H].start-1;I<s.col[H].end;I+=1)s.col[H].cell||(s.col[H].cell=[]),I>s.col[H].start-1&&s.col[H].cell[s.col[H].cell.length-1].uid===Q.cell[I].uid||(Q.cell[I]?(s.col[H].cell.push(Q.cell[I]),Q.cell[I].col||(Q.cell[I].col=s.col[H])):b.trigger({type:"warning.wb-tableparser.wb",pointer:b,err:35}));for(H=0;H<Q.cell.length;H+=1)if(Q.cell[H].row||(Q.cell[H].row=Q),Q.cell[H].rowlevel=o.level,Q.cell[H].rowlevelheader=o.headerlevel,Q.cell[H].rowgroup=o,H>0&&Q.cell[H-1].uid===Q.cell[H].uid&&1!==Q.cell[H].type&&5!==Q.cell[H].type&&Q.cell[H].rowpos===x&&Q.cell[H].colpos<=H&&(Q.cell[H].addcolheaders||(Q.cell[H].addcolheaders=[]),s.col[H]&&s.col[H].header))for(I=0;I<s.col[H].header.length;I+=1)s.col[H].header[I].colpos===H+1&&Q.cell[H].addcolheaders.push(s.col[H].header[I]);B=!0}w+=1,s.row||(s.row=[]),s.row.push(Q),o.row.push(Q),delete Q.colgroup}function m(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=a.theadRowStack.length;for(p=0;y>p;p+=1)for(l=a.theadRowStack[p],q=0,e=l.cell.length;e>q;q+=1)if(j=l.cell[q],!(1!==j.type&&7!==j.type||q>0&&j.uid===l.cell[q-1].uid||p>0&&j.uid===a.theadRowStack[p-1].cell[q].uid)){if(j.header=j.header||[],j.headers=j.headers||[],j.child=j.child||[],j.childs=j.childs||[],p>0){for(r=0,d=a.theadRowStack[p-1].cell[q].header.length;d>r;r+=1)j.headers.push(a.theadRowStack[p-1].cell[q].header[r]),a.theadRowStack[p-1].cell[q].header[r].childs.push(j);j.headers.push(a.theadRowStack[p-1].cell[q]),j.header.push(a.theadRowStack[p-1].cell[q]),a.theadRowStack[p-1].cell[q].child.push(j)}j.descCell&&(j.descCell.header=j,j.descCell.headers=j)}for(p=0,x=a.row.length;x>p;p+=1){if(l=a.row[p],w=[],v=[],m=[],t=[],g=[],l.headerset&&!l.idsheaderset){for(q=0;q<l.headerset.length;q+=1)w=w.concat(l.headerset[q]);l.idsheaderset=w}if(l.header)for(q=0;q<l.header.length;q+=1)v=v.concat(l.header[q]);for(v=l.idsheaderset.concat(v),q=0;q<l.cell.length;q+=1)if(0===q||q>0&&l.cell[q].uid!==l.cell[q-1].uid){if(j=l.cell[q],g=[],j.header=j.header||[],j.headers=j.headers||[],j.col&&!j.col.dataheader){if(k=j.col,h=[],i=[],k.headerLevel)for(s=0,o=k.headerLevel.length;o>s;s+=1)i=i.concat(k.headerLevel[s]);if(k.header)for(s=0,n=k.header.length;n>s;s+=1)h=h.concat(k.header[s]);k.dataheader||(k.dataheader=[]),k.dataheader=k.dataheader.concat(i),k.dataheader=k.dataheader.concat(h)}if(j.col&&j.col.dataheader&&(g=j.col.dataheader),1===j.type){for(j.child=j.child||[],j.childs=j.childs||[],s=0,u=t.length;u>s;s+=1)j.colpos===t[s].colpos+t[s].width&&(f=t[s].child.length,(0===f||f>0&&t[s].child[f-1].uid!==j.uid)&&t[s].child.push(j)),t[s].childs.push(j);for(s=0;s<l.idsheaderset.length;s+=1)l.idsheaderset[s].childs||(l.idsheaderset[s].childs=[]),l.idsheaderset[s].childs.push(j);j.header=j.header.concat(t),j.headers=j.headers.concat(g).concat(l.idsheaderset).concat(t),t=t.concat(j)}if(2===j.type||3===j.type){if(m=v,j.addcolheaders)for(s=0,b=j.addcolheaders.length;b>s;s+=1)g=g.concat(j.addcolheaders[s]);if(j.addrowheaders)for(s=0,c=j.addrowheaders.length;c>s;s+=1)m=m.concat(j.addrowheaders[s]);j.headers=j.headers.concat(g).concat(m),j.header=j.headers}}}}d.remove(f),b.get(0).className+=" "+g;var n,o,p,q,r,s={allParserObj:[],nbDescriptionRow:0},t=[],u=[],v=0,w=0,x=0,y=[],z=0,A=!1,B=!1,C=[],D=[],E=!1,F=[],G=[],H=!1,I=b.has("tfoot"),J=!1,K=!1;return"table"!==b.get(0).nodeName.toLowerCase()?void b.trigger({type:"error.wb-tableparser.wb",pointer:b,err:1}):b.tblparser?void b.trigger({type:"error.wb-tableparser.wb",pointer:b,err:2}):(K=b.hasClass("hassum"),b.data().tblparser=s,s.colgroup=t,s.rowgroup||(s.rowgroup=[]),s.lstrowgroup||(s.lstrowgroup=G),s.elem=b,s.uid=v,v+=1,s.colcaption={},s.colcaption.uid=v,v+=1,s.colcaption.elem=void 0,s.colcaption.type=7,s.colcaption.dataset=[],s.colcaption.summaryset=[],s.rowcaption={},s.rowcaption.uid=v,v+=1,s.rowcaption.elem=void 0,s.rowcaption.type=7,s.rowcaption.dataset=[],s.rowcaption.summaryset=[],s.col=[],I&&a("tfoot",b).appendTo(a("tbody:last",b).parent()),b.children().each(function(){var d=a(this),f=this.nodeName.toLowerCase();"caption"===f?c(this):"colgroup"===f?e(this):"thead"===f?(p=this,(0!==D.length||s.row&&s.row.length>0)&&b.trigger({type:"warning.wb-tableparser.wb",pointer:this,err:26}),a(this).data("tblparser",s),E=!0,a(this).children().each(function(){"tr"!==this.nodeName.toLowerCase()&&b.trigger({type:"warning.wb-tableparser.wb",pointer:this,err:27}),l(this)}),E=!1):"tbody"===f||"tfoot"===f?("tfoot"===f&&(J=!0),p=this,j(),d.data().tblparser=o,d.children().each(function(){return"tr"!==this.nodeName.toLowerCase()?void b.trigger({type:"warning.wb-tableparser.wb",pointer:this,err:27}):void l(this)}),i(),a.each(y,function(){this&&this.spanHeigh&&this.spanHeight>0&&b.trigger({type:"warning.wb-tableparser.wb",pointer:this,err:29})}),y=[],F=[],C=[],n+=1):"tr"===f?l(this):b.trigger({type:"error.wb-tableparser.wb",pointer:this,err:30})}),s.theadRowStack=D,delete s.colgroupFrame,s.colgrouplevel=s.colgrp,delete s.colgrp,m(s),void b.trigger("parsecomplete.wb-tableparser.wb"))};i.on("timerpoke.wb "+h,f,function(b){var c=b.type,d=a(this);switch(c){case"wb-init":j(d)}return!0}),i.on("pasiveparse.wb-tableparser.wb",function(b){var c=b.target,d=a(c);return j(d),!0}),d.add(f)}(jQuery,window,document,wb);